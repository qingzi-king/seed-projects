(this["webpackJsonpptr-webpage"]=this["webpackJsonpptr-webpage"]||[]).push([[7],{173:function(e,t,a){},180:function(e,t,a){"use strict";var n=a(57),r=a(58),c=a(61),i=a(60),l=(a(200),a(202)),u=a(0),o=a.n(u),s=a(181),d=(a(173),l.a.Header),m=l.a.Content;l.a.Footer;t.a=function(e,t){return function(t){Object(c.a)(u,t);var a=Object(i.a)(u);function u(){return Object(n.a)(this,u),a.apply(this,arguments)}return Object(r.a)(u,[{key:"render",value:function(){return o.a.createElement(l.a,{className:"d-layout"},o.a.createElement(d,{className:"d-layout-header-container"},o.a.createElement(s.a,null)),o.a.createElement(m,{className:"d-layout-body-container"},o.a.createElement("div",{className:"d-content-container"},e&&o.a.createElement(e,this.props))))}}]),u}(u.Component)}},181:function(e,t,a){"use strict";(function(e){a(191);var n=a(199),r=(a(186),a(184)),c=(a(187),a(179)),i=a(57),l=a(58),u=a(61),o=a(60),s=a(0),d=a.n(s),m=a(64),p=a(461),f=(a(173),function(t){Object(u.a)(s,t);var a=Object(o.a)(s);function s(e){var t;return Object(i.a)(this,s),(t=a.call(this,e)).handleVisibleChange=function(){t.setState({visible:!t.state.visible})},t.handleRedirect=function(){t.props.history.push("")},t.state={visible:!1},t}return Object(l.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.state,a=d.a.createElement("div",{className:"d-navigation-custom-avatar"},d.a.createElement("ul",{className:"d-navigation-menu"},d.a.createElement("li",{className:"d-navigation-menu-item"},"\u9000\u51fa\u767b\u5f55"))),i=e.G_SPLIT_URL_PARAMS()[0];return d.a.createElement("div",{className:"d-header"},d.a.createElement("div",{className:"d-header-left"},d.a.createElement("div",{className:"d-logo"},d.a.createElement("img",{src:"http://docs.antjob.ink/funenc/funenc-logo.jpg",alt:"logo"})),d.a.createElement("div",{className:"d-header-title"},e.G_SYSTEM_TITLE.name),d.a.createElement("div",{className:"d-header-company"},e.G_SYSTEM_TITLE.subName)),d.a.createElement("div",{className:"d-header-right"},d.a.createElement(c.a,{theme:"light",mode:"horizontal",defaultSelectedKeys:i,className:"d-header-nav"},d.a.createElement(c.a.Item,{key:"board"},d.a.createElement(m.b,{to:"/board"},"\u770b\u677f")),d.a.createElement(c.a.Item,{key:"plan"},d.a.createElement(m.b,{to:"/plan"},"\u8ba1\u5212\u7ba1\u7406")),d.a.createElement(c.a.Item,{key:"report"},d.a.createElement(m.b,{to:"/report"},"\u5de5\u4f5c\u62a5\u544a")),d.a.createElement(c.a.Item,{key:"console"},d.a.createElement(m.b,{to:"/console"},"\u63a7\u5236\u53f0"))),d.a.createElement("div",{className:"d-project"},"\u4ea4\u63a7MAAS\u9879\u76ee",d.a.createElement(r.a,{placement:"bottom",title:"\u5207\u6362\u9879\u76ee"},d.a.createElement(p.a,{className:"d-header-icon"}))),d.a.createElement("div",{className:"d-avatar"},d.a.createElement(n.a,{content:a,title:"",trigger:"hover",visible:t.visible,onVisibleChange:this.handleVisibleChange,placement:"bottomRight"},d.a.createElement("img",{src:"https://wework.qpic.cn/wwhead/nMl9ssowtibVGyrmvBiaibzDmibhjC2qqJsFibbRhEwic0xCtj4LdP6MT4dtWPRTTpRWM0QibY8zHZIhFg/0",alt:"avatar"})))))}}]),s}(s.Component));t.a=f}).call(this,a(34))},188:function(e,t,a){"use strict";a.d(t,"g",(function(){return l})),a.d(t,"h",(function(){return o})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"e",(function(){return b})),a.d(t,"i",(function(){return E})),a.d(t,"j",(function(){return j})),a.d(t,"a",(function(){return y})),a.d(t,"c",(function(){return w})),a.d(t,"d",(function(){return x}));var n=a(49),r=a.n(n),c=a(63),i=a(302);function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/standardRoles",t&&(a+=t),e.abrupt("return",Object(i.a)(a,"GET",null));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/users",t&&(a+=t),e.abrupt("return",Object(i.a)(a,"GET",null));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/projects","GET",null));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/project","POST",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/projects/".concat(t),"GET",null));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/projects/".concat(t),"PUT",a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/projects/".concat(t,"/addPerson"),"POST",a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,a){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/projects/".concat(t,"/users/").concat(a),"POST",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/projects/".concat(t,"/users/").concat(a),"DELETE",null));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.a)("/api/modular-auths","GET",null));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},229:function(e,t,a){},252:function(e,t,a){"use strict";a(322);var n=a(451),r=a(197),c=a(0),i=a.n(c);t.a=function(e){var t=e.title,a=e.isVisible,l=e.width,u=e.children,o=e.callbackParent,s=Object(c.useState)(a),d=Object(r.a)(s,2),m=d[0],p=d[1];return Object(c.useEffect)((function(){p(a)})),i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{width:l||"60%",title:t,placement:"right",onClose:function(){p(!1),o&&o()},visible:m},u))}},292:function(e,t,a){"use strict";(function(e){a(213);var n=a(212),r=a(49),c=a.n(r),i=(a(174),a(172)),l=a(63),u=a(57),o=a(58),s=a(75),d=a(61),m=a(60),p=a(0),f=a.n(p),b=a(188),h=a(252),E=a(324),v=a(421),j=a(422),g=function(t){Object(d.a)(r,t);var a=Object(m.a)(r);function r(t){var n;return Object(u.a)(this,r),(n=a.call(this,t)).handleGetProjects=Object(l.a)(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({loading:!0}),t.next=3,Object(b.f)();case 3:a=t.sent,r=[{title:"\u5e8f\u53f7",dataIndex:"index",render:function(e,t,a){return a+1}},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u7c7b\u578b",dataIndex:"type",render:function(e,t){return e||"/"}},{title:"\u9636\u6bb5",dataIndex:"stage",render:function(e,t){return e||"/"}},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"startTime",render:function(t,a){return e.G_DATE_FORMAT(t)}},{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"endTime",render:function(t,a){return e.G_DATE_FORMAT(t)}},{title:"\u72b6\u6001",dataIndex:"status",render:function(t,a){var n=e.G_ENUM.projectStatus.find((function(e){return e.value===t}));return n?n.label:"/"}},{title:"\u521b\u5efa\u4eba",dataIndex:"owner",render:function(e,t){return t.Owner.name||"/"}},{title:"\u64cd\u4f5c",dataIndex:"options",render:function(e,t){return f.a.createElement(f.a.Fragment,null,f.a.createElement(i.a,{size:"small",type:"link",danger:!0,onClick:n.handleVisibleDrawer.bind(Object(s.a)(n),"modifyProject",t)},"\u4fee\u6539"),f.a.createElement(i.a,{size:"small",type:"link",danger:!0,onClick:n.handleVisibleDrawer.bind(Object(s.a)(n),"setPerson",t)},"\u6210\u5458\u8bbe\u7f6e"))}}],n.setState({columns:r,dataSource:a.projects,visible:!1,loading:!1});case 6:case"end":return t.stop()}}),t)}))),n.handleVisibleDrawer=function(e,t){var a,r,c=n.state.visible;switch(e){case"createProject":r="\u65b0\u5efa\u9879\u76ee",a=f.a.createElement(E.a,{onclose:n.handleVisibleDrawer,callbackParent:n.handleGetProjects});break;case"modifyProject":r="\u66f4\u65b0\u9879\u76ee",a=f.a.createElement(v.a,{project:t,onclose:n.handleVisibleDrawer,callbackParent:n.handleGetProjects});break;case"setPerson":r="\u8bbe\u7f6e\u9879\u76ee\u6210\u5458",a=f.a.createElement(j.a,{project:t,onclose:n.handleVisibleDrawer,callbackParent:n.handleGetProjects})}n.setState({visible:!c,subModalTitle:r,subModalComponent:a})},n.state={loading:!1,dataSource:[],columns:[],subModalComponent:null,subModalTitle:null},n}return Object(o.a)(r,[{key:"componentDidMount",value:function(){this.handleGetProjects()}},{key:"render",value:function(){var e=this.state;return f.a.createElement("div",null,f.a.createElement("div",{style:{marginBottom:15}},f.a.createElement(i.a,{type:"primary",onClick:this.handleVisibleDrawer.bind(this,"createProject")},"\u65b0\u5efa\u9879\u76ee"),f.a.createElement("small",{className:"d-text-gray"},"\uff08\u5f53\u524d\u5171\u6709\u9879\u76ee",e.dataSource.length,"\u4e2a\uff09")),f.a.createElement(n.a,{className:"d-table-center-container",dataSource:e.dataSource,columns:e.columns,loading:e.loading,rowKey:function(e){return e.uuid},bordered:!0,pagination:{pageSize:20}}),f.a.createElement(h.a,{title:e.subModalTitle,isVisible:e.visible,callbackParent:this.handleVisibleDrawer},e.subModalComponent))}}]),r}(p.Component);t.a=g}).call(this,a(34))},302:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var n=a(452),r=(a(204),a(68)),c=a(304),i=a.n(c),l=a(321),u=[];function o(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4?arguments[4]:void 0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if("GET"!=a){var m=(new Date).getTime();Object(l.remove)(u,(function(e){return e.api===t&&e.timestamp<m-500*o}));var p=Object(l.findLast)(u,(function(e){return e.api===t}));if(p)return r.a.warning("\u5f53\u524d\u8bbf\u95ee\u7684\u9891\u6b21\u8fc7\u9ad8\uff0c\u8bf7\u9002\u5f53\u653e\u6162\u624b\u901f\uff01",1),{errcode:-100,msg:null};u.push({api:t,timestamp:(new Date).getTime()})}return new Promise((function(l,u){i()({method:a,headers:Object(n.a)(Object(n.a)({},d),{},{authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImRpbmd0YWxrSWQiOiJtYW5hZ2VyNzg1MCIsImlhdCI6MTU5NjA5MzIzMywiZXhwIjoxNTk3Mzg5MjMzfQ.DREiuE1SYBlazQT1lxCLtLIkGsRSRVnkdrp_FqeDdQE"}),url:(s||e.G_SERVER_HOST)+t,data:c}).then((function(e){e.data.errcode&&e.data.errcode<0&&(r.a.error(e.data.msg||"\u8bf7\u6c42\u9519\u8bef\uff01"),console.log(JSON.stringify(e.data))),l(e.data)})).catch((function(e){e&&r.a.error("\u670d\u52a1\u7aef\u53d1\u751f\u903b\u8f91\u9519\u8bef\uff01"),u(e)}))}))}}).call(this,a(34))},324:function(e,t,a){"use strict";(function(e){a(219);var n=a(224),r=(a(174),a(172)),c=(a(234),a(231)),i=a(49),l=a.n(i),u=(a(204),a(68)),o=a(63),s=a(197),d=(a(203),a(195)),m=(a(221),a(232)),p=(a(222),a(230)),f=a(0),b=a.n(f),h=a(188),E=p.a.RangePicker,v=m.a.TextArea,j=d.a.Option;t.a=function(t){var a=Object(f.useState)(!1),i=Object(s.a)(a,2),p=i[0],g=i[1],y=function(){var e=Object(o.a)(l.a.mark((function e(a){var n,r,c,i,o,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.name,r=a.dateRange,c=a.describe,i=a.stage,o=a.type,s={name:n,stage:i,type:o,describe:c},r&&(s.startTime=r[0],s.endTime=r[1]),g(!0),e.next=6,Object(h.b)(s);case 6:d=e.sent,g(!1),d.errcode>=0&&(u.a.success("\u9879\u76ee\u521b\u5efa\u6210\u529f\uff01"),t.callbackParent());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b.a.createElement(n.a,{spinning:p},b.a.createElement(c.a,Object.assign({},{labelCol:{span:5},wrapperCol:{span:18}},{name:"basic",initialValues:{type:"\u5ba2\u6237\u5b9a\u5236\u5f00\u53d1\u7c7b",stage:"\u5f00\u59cb"},onFinish:y}),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\uff01"}]},b.a.createElement(m.a,{placeholder:"\u8f93\u5165\u9879\u76ee\u540d\u79f0\uff08\u53ef\u4ee5\u4f7f\u7528\u4e2d\u82f1\u6587\u3001\u6570\u5b57\u7ec4\u5408\uff09"})),b.a.createElement(c.a.Item,{label:"\u8d77\u6b62\u65f6\u95f4",name:"dateRange"},b.a.createElement(E,null)),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u63cf\u8ff0",name:"describe"},b.a.createElement(v,{rows:4,placeholder:"100\u5b57\u4ee5\u5185\u9879\u76ee\u63cf\u8ff0\uff08\u9009\u586b\uff09"})),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u7c7b\u578b",name:"type"},b.a.createElement(d.a,{placeholder:"\u9009\u62e9\u9879\u76ee\u7c7b\u578b"},e.G_ENUM.projectTypes.map((function(e,t){return b.a.createElement(j,{key:t,value:e},e)})))),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u9636\u6bb5",name:"stage"},b.a.createElement(d.a,{placeholder:"\u9009\u62e9\u9879\u76ee\u9636\u6bb5"},e.G_ENUM.projectStages.map((function(e,t){return b.a.createElement(j,{key:t,value:e},e)})))),b.a.createElement("div",{className:"d-textalign-center"},b.a.createElement(r.a,{loading:p,type:"primary",htmlType:"submit"},"\u7acb\u5373\u65b0\u5efa"),b.a.createElement(r.a,{type:"dashed",onClick:function(e){t.onclose("cancel")},style:{marginLeft:15}},"\u53d6\u6d88"))))}}).call(this,a(34))},421:function(e,t,a){"use strict";(function(e){a(219);var n=a(224),r=(a(174),a(172)),c=(a(234),a(231)),i=a(49),l=a.n(i),u=(a(204),a(68)),o=a(63),s=a(197),d=(a(203),a(195)),m=(a(221),a(232)),p=(a(222),a(230)),f=a(0),b=a.n(f),h=a(188),E=p.a.RangePicker,v=m.a.TextArea,j=d.a.Option;t.a=function(t){var a=Object(f.useState)(!1),i=Object(s.a)(a,2),p=i[0],g=i[1],y=function(){var e=Object(o.a)(l.a.mark((function e(a){var n,r,c,i,o,s,d,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.project&&t.project.uuid){e.next=2;break}return e.abrupt("return",u.a.warning("\u83b7\u53d6\u9879\u76ee\u4fe1\u606f\u5931\u8d25\uff01"));case 2:return n=a.name,r=a.dateRange,c=a.describe,i=a.status,o=a.stage,s=a.type,d={name:n,stage:o,type:s,status:i,describe:c},r&&(d.startTime=r[0],d.endTime=r[1]),g(!0),e.next=8,Object(h.i)(t.project.uuid,d);case 8:m=e.sent,g(!1),m.errcode>=0&&(u.a.success("\u9879\u76ee\u4fee\u6539\u6210\u529f\uff01"),t.callbackParent());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b.a.createElement(n.a,{spinning:p},b.a.createElement(c.a,Object.assign({},{labelCol:{span:5},wrapperCol:{span:18}},{name:"basic",initialValues:{name:t.project.name,describe:t.project.describe,dateRange:[e.G_DATE_FORMAT(t.project.startTime,"self"),e.G_DATE_FORMAT(t.project.endTime,"self")],type:t.project.type,stage:t.project.stage,status:t.project.status},onFinish:y}),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\uff01"}]},b.a.createElement(m.a,{placeholder:"\u8f93\u5165\u9879\u76ee\u540d\u79f0\uff08\u53ef\u4ee5\u4f7f\u7528\u4e2d\u82f1\u6587\u3001\u6570\u5b57\u7ec4\u5408\uff09"})),b.a.createElement(c.a.Item,{label:"\u8d77\u6b62\u65f6\u95f4",name:"dateRange"},b.a.createElement(E,null)),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u63cf\u8ff0",name:"describe"},b.a.createElement(v,{rows:4,placeholder:"100\u5b57\u4ee5\u5185\u9879\u76ee\u63cf\u8ff0\uff08\u9009\u586b\uff09"})),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u7c7b\u578b",name:"type"},b.a.createElement(d.a,{placeholder:"\u9009\u62e9\u9879\u76ee\u7c7b\u578b"},e.G_ENUM.projectTypes.map((function(e,t){return b.a.createElement(j,{key:t,value:e},e)})))),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u72b6\u6001",name:"status"},b.a.createElement(d.a,{placeholder:"\u9009\u62e9\u9879\u76ee\u72b6\u6001"},e.G_ENUM.projectStatus.map((function(e){return b.a.createElement(j,{key:e.value,value:e.value},e.label)})))),b.a.createElement(c.a.Item,{label:"\u9879\u76ee\u9636\u6bb5",name:"stage"},b.a.createElement(d.a,{placeholder:"\u9009\u62e9\u9879\u76ee\u9636\u6bb5"},e.G_ENUM.projectStages.map((function(e,t){return b.a.createElement(j,{key:t,value:e},e)})))),b.a.createElement("div",{className:"d-textalign-center"},b.a.createElement(r.a,{loading:p,type:"primary",htmlType:"submit"},"\u7acb\u5373\u65b0\u5efa"),b.a.createElement(r.a,{type:"dashed",onClick:function(e){t.onclose("cancel")},style:{marginLeft:15}},"\u53d6\u6d88"))))}}).call(this,a(34))},422:function(e,t,a){"use strict";a(234);var n=a(231),r=(a(213),a(212)),c=(a(174),a(172)),i=(a(191),a(199)),l=(a(423),a(450)),u=(a(204),a(68)),o=a(49),s=a.n(o),d=a(63),m=a(197),p=(a(203),a(195)),f=(a(221),a(232)),b=(a(222),a(230)),h=a(0),E=a.n(h),v=a(459),j=a(458),g=a(188),y=(a(425),b.a.RangePicker,f.a.TextArea,p.a.Option),O=function(e){var t=n.a.useForm(),a=Object(m.a)(t,1)[0],r=Object(h.useState)(!1),i=Object(m.a)(r,2),l=i[0],o=i[1],f=Object(h.useState)(!1),b=Object(m.a)(f,2),v=b[0],j=b[1],O=Object(h.useState)(!1),w=Object(m.a)(O,2),k=w[0],x=w[1];Object(h.useEffect)((function(){T()}),[]);var I=function(){j(!v)},T=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.h)();case 2:t=e.sent,x(t.users);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var t=Object(d.a)(s.a.mark((function t(n){var r,c,i,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.userIds,c=n.roleCode,(i={}).users=r.map((function(e){return{userId:e,roleCode:c}})),o(!0),t.next=6,Object(g.j)(e.project.uuid,i);case 6:l=t.sent,o(!1),l.errcode>=0&&(a.resetFields(),u.a.success("\u9879\u76ee\u4eba\u5458\u6dfb\u52a0\u6210\u529f\uff01"),e.callbackParent());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return E.a.createElement("div",{style:{marginBottom:15}},v?E.a.createElement(n.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:18}},{form:a,name:"basic",initialValues:{type:"\u5ba2\u6237\u5b9a\u5236\u5f00\u53d1\u7c7b",stage:"\u5f00\u59cb"},onFinish:S,className:"d-addperson"}),E.a.createElement(n.a.Item,{label:"\u4eba\u5458",name:"userIds",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4eba\u5458\uff01"}]},E.a.createElement(p.a,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u4eba\u5458"},k.map((function(e){return E.a.createElement(y,{key:e.id,value:e.id},e.name," ",e.mobile&&E.a.createElement("small",{className:"d-text-gray"},e.mobile.slice(6,10)))})))),E.a.createElement(n.a.Item,{label:"\u89d2\u8272",name:"roleCode",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272\uff01"}]},E.a.createElement(p.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272"},e.standardRoles.map((function(e){return E.a.createElement(y,{key:e.id,value:e.code},e.name," ",E.a.createElement("small",{className:"d-text-gray"},e.shorthand))})))),E.a.createElement("div",{className:"d-textalign-center"},E.a.createElement(c.a,{loading:l,type:"primary",htmlType:"submit"},"\u7acb\u5373\u6dfb\u52a0"),E.a.createElement(c.a,{type:"dashed",onClick:I,style:{marginLeft:15}},"\u53d6\u6d88"))):E.a.createElement(c.a,{type:"primary",onClick:I},"\u6dfb\u52a0\u4eba\u5458"))};t.a=function(e){var t=Object(h.useState)(!0),a=Object(m.a)(t,2),n=a[0],o=a[1],p=Object(h.useState)({}),f=Object(m.a)(p,2),b=f[0],y=f[1],w=Object(h.useState)([]),k=Object(m.a)(w,2),x=k[0],I=k[1],T=Object(h.useState)([]),S=Object(m.a)(T,2),M=S[0],N=S[1];Object(h.useEffect)((function(){C(),_()}),[]);var C=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.g)();case 2:t=e.sent,N(t.standardRoles);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var t=Object(d.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.e)(e.project.uuid);case 2:a=t.sent,I(a.project.Users),o(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(s.a.mark((function e(t,a,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("delete"===(r=n?"delete":"create")&&t.roles.length<2)){e.next=3;break}return e.abrupt("return",u.a.warning("\u81f3\u5c11\u5e94\u5b58\u5728\u4e00\u4e2a\u6709\u6548\u89d2\u8272\uff01",1));case 3:G({type:r,roleCode:a.code});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)(e.project.uuid,b.uuid,a);case 2:t.sent.errcode>=0&&_();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=[{title:"\u5e8f\u53f7",dataIndex:"index",width:50,render:function(e,t,a){return a+1}},{title:"\u59d3\u540d",dataIndex:"name",width:80,render:function(e,t,a){return e||"/"}},{title:"\u624b\u673a\u53f7",dataIndex:"mobile",width:100,render:function(e,t,a){return e||"/"}},{title:"\u90ae\u7bb1",dataIndex:"email",render:function(e,t,a){return e||"/"}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role",render:function(e,t,a){var n=t.roles.map((function(e){return e.name})).join("\u3001"),r=t.roles.map((function(e){return e.code})),c=E.a.createElement("div",{className:"d-dropdown-menu-container"},E.a.createElement("ul",null,M.map((function(e){var a=r.includes(e.code);return E.a.createElement("li",{key:e.id,onClick:function(){return R(t,e,a)}},a&&E.a.createElement(j.a,{className:"d-dropdown-icon"}),e.name)}))));return E.a.createElement(i.a,{placement:"bottom",content:c,trigger:"click"},E.a.createElement("div",{className:"d-link",onClick:function(){return P(t)}},n||"/"))}},{title:"\u64cd\u4f5c",dataIndex:"options",render:function(t,a,n){return E.a.createElement(c.a,{type:"link",danger:!0,onClick:function(){return t=a,void l.a.confirm({title:"\u786e\u5b9a\u8981\u5c06\u300c".concat(t.name,"\u300d\u79fb\u9664\u672c\u9879\u76ee\u5417?"),icon:E.a.createElement(v.a,null),content:"\u79fb\u9664\u540e\u53ef\u518d\u6b21\u52a0\u5165\u672c\u9879\u76ee",okType:"danger",onOk:function(){var a=Object(d.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(g.c)(e.project.uuid,t.uuid);case 2:a.sent.errcode>=0&&(u.a.success("\u79fb\u9664\u6210\u529f\uff01",1),_());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),onCancel:function(){}});var t}},"\u79fb\u9664")}}];return E.a.createElement("div",null,E.a.createElement(O,Object.assign({},e,{standardRoles:M,callbackParent:_})),E.a.createElement(r.a,{className:"d-table-center-container",dataSource:x,columns:A,loading:n,pagination:!1,rowKey:function(e){return e.id},bordered:!0}))}},425:function(e,t,a){},445:function(e,t,a){"use strict";(function(e){a(213);var n=a(212),r=a(49),c=a.n(r),i=a(63),l=a(197),u=a(0),o=a.n(u),s=a(188);t.a=function(t){var a=Object(u.useState)(!0),r=Object(l.a)(a,2),d=r[0],m=r[1],p=Object(u.useState)([]),f=Object(l.a)(p,2),b=f[0],h=f[1];Object(u.useEffect)((function(){return E(),function(){}}),[]);var E=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.g)("?type=detail");case 2:t=e.sent,h(t.standardRoles),m(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=[{title:"\u5e8f\u53f7",dataIndex:"index",width:50,render:function(e,t,a){return a+1}},{title:"\u540d\u79f0",dataIndex:"name",width:120,render:function(e,t){return e||"/"}},{title:"\u7b80\u79f0",dataIndex:"shorthand",width:80,render:function(e,t){return e||"/"}},{title:"\u7f16\u7801",dataIndex:"code",width:150,render:function(e,t){return e||"/"}},{title:"\u804c\u8d23",dataIndex:"duty",render:function(e,t){return e||"/"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",width:120,render:function(t,a){return e.G_DATE_FORMAT(t)}}];return o.a.createElement("div",null,o.a.createElement(n.a,{className:"d-table-center-container",dataSource:b,columns:v,loading:d,pagination:!1,rowKey:function(e){return e.id},bordered:!0}))}}).call(this,a(34))},446:function(e,t,a){"use strict";(function(e){a(213);var n=a(212),r=a(49),c=a.n(r),i=(a(174),a(172)),l=(a(253),a(276)),u=a(63),o=a(57),s=a(58),d=a(61),m=a(60),p=a(0),f=a.n(p),b=a(460),h=a(188),E=a(252),v=function(t){Object(d.a)(r,t);var a=Object(m.a)(r);function r(t){var n;return Object(o.a)(this,r),(n=a.call(this,t)).handleGetModularAuths=Object(u.a)(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({loading:!0}),t.next=3,Object(h.d)();case 3:a=t.sent,r=[{title:"\u5e8f\u53f7",dataIndex:"index",width:50,render:function(e,t,a){return a+1}},{title:"\u7c7b\u578b",width:100,dataIndex:"type"},{title:"\u7f16\u7801",dataIndex:"code",width:150,render:function(e,t){return e||"/"}},{title:"\u5f55\u5165\u65f6\u95f4",dataIndex:"createdAt",width:100,render:function(t,a){return e.G_DATE_FORMAT(t)}},{title:"\u6743\u9650\u62e5\u6709\u8005",dataIndex:"owner",render:function(e,t){return t.AuthModularItems.length>0?f.a.createElement("div",null,t.AuthModularItems.map((function(e){return e.User?f.a.createElement(l.a,{key:e.id,style:{marginTop:2,marginBottom:2}},e.User.name):f.a.createElement(l.a,{key:e.id,icon:f.a.createElement(b.a,null),style:{marginTop:2,marginBottom:2}},e.StandardRole.name)}))):"/"}},{title:"\u5907\u6ce8",dataIndex:"remark",render:function(e,t){return f.a.createElement("div",{style:{minWidth:100}},e||"/")}},{title:"\u64cd\u4f5c",dataIndex:"options",width:100,render:function(e,t){return f.a.createElement(f.a.Fragment,null,f.a.createElement(i.a,{size:"small",type:"link",danger:!0},"\u4fee\u6539"))}}],n.setState({columns:r,dataSource:a.modularAuths,visible:!1,loading:!1});case 6:case"end":return t.stop()}}),t)}))),n.handleVisibleDrawer=function(e,t){var a=n.state.visible;n.setState({visible:!a,subModalTitle:void 0,subModalComponent:void 0})},n.state={loading:!1,dataSource:[],columns:[],subModalComponent:null,subModalTitle:null},n}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.handleGetModularAuths()}},{key:"render",value:function(){var e=this.state;return f.a.createElement("div",null,f.a.createElement("div",{style:{marginBottom:15}},f.a.createElement(i.a,{type:"primary",onClick:this.handleVisibleDrawer.bind(this,"createProject")},"\u65b0\u589e\u6388\u6743"),f.a.createElement("small",{className:"d-text-gray"},"\uff08\u5f53\u524d\u5171\u6709\u6388\u6743\u6a21\u5757",e.dataSource.length,"\u4e2a\uff09")),f.a.createElement(n.a,{className:"d-table-center-container",dataSource:e.dataSource,columns:e.columns,loading:e.loading,rowKey:function(e){return e.id},bordered:!0,pagination:{pageSize:20}}),f.a.createElement(E.a,{title:e.subModalTitle,isVisible:e.visible,callbackParent:this.handleVisibleDrawer},e.subModalComponent))}}]),r}(p.Component);t.a=v}).call(this,a(34))},447:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(462);a(229);t.a=function(e){var t=e.type;return"selectMenu"===t?r.a.createElement("center",{style:{marginTop:"3rem"}},r.a.createElement("embed",{src:"http://docs.antjob.ink/funenc/settings_tab_mgiw.svg",width:"500",height:"200",type:"image/svg+xml"}),r.a.createElement("div",{className:"d-margin-15-0"},"\u8bf7\u9009\u62e9\u5de6\u4fa7\u83dc\u5355\u680f\uff01")):"card-loading"===t?r.a.createElement("center",{style:{marginTop:"3rem"}},r.a.createElement("embed",{src:"http://docs.antjob.ink/funenc/Ride_till_I_can_no_more_44wq.svg",className:"d-opacity-loop",width:"500",height:"200",type:"image/svg+xml"}),r.a.createElement("div",{className:"d-margin-15-0"},r.a.createElement(c.a,null)," \u6570\u636e\u52a0\u8f7d\u4e2d...")):"loading"===t?r.a.createElement("center",null,r.a.createElement("div",{className:"d-margin-15-0"},r.a.createElement(c.a,null)," \u6570\u636e\u52a0\u8f7d\u4e2d...")):r.a.createElement("center",null,"....")}},448:function(e,t,a){},455:function(e,t,a){"use strict";a.r(t),function(e){a(187);var n=a(179),r=a(57),c=a(58),i=a(61),l=a(60),u=a(0),o=a.n(u),s=a(180),d=a(292),m=a(445),p=a(446),f=a(447),b=(a(448),function(t){Object(i.a)(s,t);var a=Object(l.a)(s);function s(e){var t;return Object(r.a)(this,s),(t=a.call(this,e)).handleMenu=function(e){var a=e.key;t.props.history.push("/console/".concat(a))},t.state={},t}return Object(c.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.state;var t,a=e.G_SPLIT_URL_PARAMS()[1]||"\u65e0";switch(a){case"project":t=o.a.createElement(d.a,null);break;case"role":t=o.a.createElement(m.a,null);break;case"authorization":t=o.a.createElement(p.a,null);break;default:t=o.a.createElement(f.a,{type:"selectMenu"})}return o.a.createElement(u.Fragment,null,o.a.createElement("div",{className:"d-left-container"},o.a.createElement(n.a,{onClick:this.handleMenu,selectedKeys:a,mode:"inline"},o.a.createElement(n.a.Item,{key:"project"},"\u9879\u76ee\u7ba1\u7406"),o.a.createElement(n.a.Item,{key:"role"},"\u89d2\u8272\u7ba1\u7406"),o.a.createElement(n.a.Item,{key:"authorization"},"\u6388\u6743\u7ba1\u7406"))),o.a.createElement("div",{className:"d-right-container"},t))}}]),s}(u.Component));t.default=Object(s.a)(b)}.call(this,a(34))}}]);
//# sourceMappingURL=7.e6ad4a72.chunk.js.map